Started by user unknown or anonymous
Running in Durability level: MAX_SURVIVABILITY
[8mha:////4CCz6q0bQfRpkLBTyPowKOBGVpMjm4dyx8Zz0BbyuEaIAAAAoh+LCAAAAAAAAP9tjTEOwjAQBM8BClpKHuFItIiK1krDC0x8GCfWnbEdkooX8TX+gCESFVvtrLSa5wtWKcKBo5UdUu8otU4GP9jS5Mixv3geZcdn2TIl9igbHBs2eJyx4YwwR1SwULBGaj0nRzbDRnX6rmuvydanHMu2V1A5c4MHCFXMWcf8hSnC9jqYxPTz/BXAFEIGsfuclm8zQVqFvQAAAA==[0m[Pipeline] Start of Pipeline
[8mha:////4Fp2pHJMxiNt7r6AgdsMAYZXP5wQXGjoo38R5VBfHRdJAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycohUghExsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jduZBmjwAAAAA==[0m[Pipeline] withCredentials
Masking supported pattern matches of $passNexus
[8mha:////4GBU7i4G1vMEG6+I46+HtftTXS1KWLAvr0erX0Wo7yJyAAAApR+LCAAAAAAAAP9tjTEOwjAUQ3+KOrAycoh0gA0xsUZZOEFIQkgb/d8mKe3EibgadyBQiQlLlmxL1nu+oE4RjhQdby12HpP2vA+jK4lPFLtroIm3dOGaMFGwXNpJkrGnpUrKFhaxClYC1hZ1oOTRZdiIVt1VExS65pxj2Q4CKm8GeAAThZxVzN8yR9jeRpMIf5y/AJj7DGxXvP/86jfoP95RwAAAAA==[0m[Pipeline] {
[8mha:////4I4klj2nf83EWd94DTFRdoASkZF+0C4fMIzdlhINVJ25AAAAoh+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQTbaGWsbAmNJ0AWEZb8zwLrbuWJvJp3kLiJlZNMMm+a93rDOic4UbLcG+wdZu14DKOti0+U+lugiXu6ck2YKRguzSSpM+cFJRUDS1gDKwEbgzpQdmgLbIVXD9UGhba9lFS/o4DGdQM8gYlqLiqVL8wJdvexy4Q/z18BzDEWYIfa/QfeJvY8vAAAAA==[0m[Pipeline] }
[8mha:////4H43mqieFiz1b0QD8HRkoPB3O3qCj9omD4ayX6b4xdj1AAAAox+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQRbmNgYK1tC4wmQRYQl/7PAult5Iq/mHSRuYuUkk8yb5r3esM4JTpQs9wZ7h1k7HsNo6+ITpf4WaOKerlwTZgqGSzNJ6sx5QUnFwBLWwErAxqAOlB3aAlvh1UO1QaFtLyXV7yigcd0AT2CimotK5Qtzgt197DLhz/NXAHOMBdihdv8Brcky5bwAAAA=[0m[Pipeline] // withCredentials
[8mha:////4M2EuDXpW9UmZPCBTpGl7UN5ud2x4SN3EVcyHWxUs3zQAAAAox+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQSb2FgYK1tC4wmQRYQl/7PAult5Iq/mHSRuYuUkk8yb5r3esM4JTpQs9wZ7h1k7HsNo6+ITpf4WaOKerlwTZgqGSzNJ6sx5QUnFwBLWwErAxqAOlB3aAlvh1UO1QaFtLyXV7yigcd0AT2CimotK5Qtzgt197DLhz/NXAHMswPa1h/gB9q44FbwAAAA=[0m[Pipeline] properties
WARNING: Unknown parameter(s) found for class type 'hudson.model.ChoiceParameterDefinition': defaultValue
[8mha:////4FM3eD7eDHNUu5kytwgRXdEREsKkV9npAjTWt8gMf9hrAAAAox+LCAAAAAAAAP9tjTEOAiEURD9rLGwtPQSbWJkYK1tC4wmQRYQl/7PAult5Iq/mHSRuYuUkk8yb5r3esM4JTpQs9wZ7h1k7HsNo6+ITpf4WaOKerlwTZgqGSzNJ6sx5QUnFwBLWwErAxqAOlB3aAlvh1UO1QaFtLyXV7yigcd0AT2CimotK5Qtzgt197DLhz/NXAHOMBdihdv8BWkcFLbwAAAA=[0m[Pipeline] End of Pipeline
java.lang.UnsupportedOperationException: no known implementation of class hudson.model.ParameterDefinition is named WHideParameterDefinition
	at org.jenkinsci.plugins.structs.describable.DescribableModel.resolveClass(DescribableModel.java:549)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.coerce(DescribableModel.java:473)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.coerceList(DescribableModel.java:585)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.coerce(DescribableModel.java:458)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.buildArguments(DescribableModel.java:409)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.instantiate(DescribableModel.java:329)
Caused: java.lang.IllegalArgumentException: Could not instantiate {parameterDefinitions=[{$class=BooleanParameterDefinition, defaultValue=false, description=Opcional, name=Refresh_Parameters}, @choice(choices=[QA159, QA222, QA221, QA81, QA82, QA68, QA104, QA99],defaultValue=,description=PT Deploy,name=PT_Deploy), {$class=BooleanParameterDefinition, defaultValue=false, description=Script de cambio, name=DobleExecute}, {$class=BooleanParameterDefinition, defaultValue=false, description=Â¿Validar logs despuesde todas las ejecuciones?, name=validarLogsPostEjecuciones}, {$class=WHideParameterDefinition, defaultValue=CompensaciÃ³n y ConciliaciÃ³n, description=, name=mon_plataforma}, {$class=WHideParameterDefinition, defaultValue=C3 (Centro de Computo), description=, name=mon_aplicacion}, {$class=WHideParameterDefinition, defaultValue=CD, description=, name=mon_practica}, {$class=WHideParameterDefinition, defaultValue=DB, description=, name=mon_tipo}, {$class=WHideParameterDefinition, defaultValue=QA, description=, name=mon_ambiente}, {$class=ChoiceParameter, choiceType=PT_SINGLE_SELECT, description=, filterLength=1, filterable=true, name=C3_bd, randomName=UNC, script={$class=GroovyScript, fallbackScript={classpath=[], sandbox=false, script=}, script={classpath=[], sandbox=false, script=
import groovy.json.JsonSlurper
import groovy.transform.Field
import jenkins.model.*
@Field def token=""
@Field def nexusResponse = [:]
def responseList = []
responseList.add('00_ZERO')
while(token!=null){
    request()
  for(int i=0; i < nexusResponse.items.size();i++){
        if(nexusResponse.items[i].group.toString().equals('QA')){
              responseList.add(nexusResponse.items[i].version.toString())

        }
  }

}
    return responseList.sort()
def request(){
    if(token==""){
        urlNexusArtifactory = "http://10.130.2.30:8081/service/rest/v1/search?sort=&repository=maven-c3-bd-release&name=C3_bd"
    }else{
        urlNexusArtifactory = "http://10.130.2.30:8081/service/rest/v1/search?continuationToken="+token+"&sort=&repository=maven-c3-bd-release&name=C3_bd"
    }
    try {
         credentialsId = 'ugithub'
        def creds = com.cloudbees.plugins.credentials.CredentialsProvider.lookupCredentials(
        com.cloudbees.plugins.credentials.common.StandardUsernameCredentials.class, Jenkins.instance, null, null ).find{
        it.id == credentialsId}
        String userpass = creds.username.toString() + ':' + creds.password.toString();
        String basicAuth = "Basic " + new String(Base64.getEncoder().encode(userpass.getBytes()));
        def http_client = new URL(urlNexusArtifactory).openConnection() as HttpURLConnection
        http_client.setRequestProperty("Authorization", basicAuth);
        http_client.setRequestMethod("GET");
        http_client.connect();

        if (http_client.responseCode == 200) {
            nexusResponse = new JsonSlurper().parseText(http_client.inputStream.getText('UTF-8'))
        } else {
            println("HTTP response error")
            System.exit(0)
        }
        if(nexusResponse.continuationToken=="null"){
            token="null"

        }else{
            token=nexusResponse.continuationToken
        }
    }catch (Exception e) {
        println(e)
    }
}}}}]} for hudson.model.ParametersDefinitionProperty
	at org.jenkinsci.plugins.structs.describable.DescribableModel.instantiate(DescribableModel.java:334)
	at org.jenkinsci.plugins.structs.describable.UninstantiatedDescribable.instantiate(UninstantiatedDescribable.java:208)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.coerce(DescribableModel.java:466)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.coerceList(DescribableModel.java:585)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.coerce(DescribableModel.java:458)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.buildArguments(DescribableModel.java:409)
	at org.jenkinsci.plugins.structs.describable.DescribableModel.instantiate(DescribableModel.java:329)
	at org.jenkinsci.plugins.workflow.cps.DSL.invokeStep(DSL.java:302)
	at org.jenkinsci.plugins.workflow.cps.DSL.invokeMethod(DSL.java:193)
	at org.jenkinsci.plugins.workflow.cps.CpsScript.invokeMethod(CpsScript.java:122)
	at jdk.internal.reflect.GeneratedMethodAccessor115.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:93)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:325)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1213)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1022)
	at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:42)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)
	at org.kohsuke.groovy.sandbox.impl.Checker$1.call(Checker.java:163)
	at org.kohsuke.groovy.sandbox.GroovyInterceptor.onMethodCall(GroovyInterceptor.java:23)
	at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SandboxInterceptor.onMethodCall(SandboxInterceptor.java:158)
	at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SandboxInterceptor.onMethodCall(SandboxInterceptor.java:143)
	at org.kohsuke.groovy.sandbox.impl.Checker$1.call(Checker.java:161)
	at org.kohsuke.groovy.sandbox.impl.Checker.checkedCall(Checker.java:165)
	at com.cloudbees.groovy.cps.sandbox.SandboxInvoker.methodCall(SandboxInvoker.java:17)
Caused: java.lang.IllegalArgumentException: Could not instantiate {properties=[@parameters(<anonymous>=[{$class=BooleanParameterDefinition, defaultValue=false, description=Opcional, name=Refresh_Parameters}, @choice(choices=[QA159, QA222, QA221, QA81, QA82, QA68, QA104, QA99],defaultValue=,description=PT Deploy,name=PT_Deploy), {$class=BooleanParameterDefinition, defaultValue=false, description=Script de cambio, name=DobleExecute}, {$class=BooleanParameterDefinition, defaultValue=false, description=Â¿Validar logs despuesde todas las ejecuciones?, name=validarLogsPostEjecuciones}, {$class=WHideParameterDefinition, defaultValue=CompensaciÃ³n y ConciliaciÃ³n, description=, name=mon_plataforma}, {$class=WHideParameterDefinition, defaultValue=C3 (Centro de Computo), description=, name=mon_aplicacion}, {$class=WHideParameterDefinition, defaultValue=CD, description=, name=mon_practica}, {$class=WHideParameterDefinition, defaultValue=DB, description=, name=mon_tipo}, {$class=WHideParameterDefinition, defaultValue=QA, description=, name=mon_ambiente}, {$class=ChoiceParameter, choiceType=PT_SINGLE_SELECT, description=, filterLength=1, filterable=true, name=C3_bd, randomName=UNC, script={$class=GroovyScript, fallbackScript={classpath=[], sandbox=false, script=}, script={classpath=[], sandbox=false, script=
import groovy.json.JsonSlurper
import groovy.transform.Field
import jenkins.model.*
@Field def token=""
@Field def nexusResponse = [:]
def responseList = []
responseList.add('00_ZERO')
while(token!=null){
    request()
  for(int i=0; i < nexusResponse.items.size();i++){
        if(nexusResponse.items[i].group.toString().equals('QA')){
              responseList.add(nexusResponse.items[i].version.toString())

        }
  }

}
    return responseList.sort()
def request(){
    if(token==""){
        urlNexusArtifactory = "http://10.130.2.30:8081/service/rest/v1/search?sort=&repository=maven-c3-bd-release&name=C3_bd"
    }else{
        urlNexusArtifactory = "http://10.130.2.30:8081/service/rest/v1/search?continuationToken="+token+"&sort=&repository=maven-c3-bd-release&name=C3_bd"
    }
    try {
         credentialsId = 'ugithub'
        def creds = com.cloudbees.plugins.credentials.CredentialsProvider.lookupCredentials(
        com.cloudbees.plugins.credentials.common.StandardUsernameCredentials.class, Jenkins.instance, null, null ).find{
        it.id == credentialsId}
        String userpass = creds.username.toString() + ':' + creds.password.toString();
        String basicAuth = "Basic " + new String(Base64.getEncoder().encode(userpass.getBytes()));
        def http_client = new URL(urlNexusArtifactory).openConnection() as HttpURLConnection
        http_client.setRequestProperty("Authorization", basicAuth);
        http_client.setRequestMethod("GET");
        http_client.connect();

        if (http_client.responseCode == 200) {
            nexusResponse = new JsonSlurper().parseText(http_client.inputStream.getText('UTF-8'))
        } else {
            println("HTTP response error")
            System.exit(0)
        }
        if(nexusResponse.continuationToken=="null"){
            token="null"

        }else{
            token=nexusResponse.continuationToken
        }
    }catch (Exception e) {
        println(e)
    }
}}}}])]} for org.jenkinsci.plugins.workflow.multibranch.JobPropertyStep
	at org.jenkinsci.plugins.structs.describable.DescribableModel.instantiate(DescribableModel.java:334)
	at org.jenkinsci.plugins.workflow.cps.DSL.invokeStep(DSL.java:302)
	at org.jenkinsci.plugins.workflow.cps.DSL.invokeMethod(DSL.java:193)
	at org.jenkinsci.plugins.workflow.cps.CpsScript.invokeMethod(CpsScript.java:122)
	at jdk.internal.reflect.GeneratedMethodAccessor115.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:93)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:325)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1213)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1022)
	at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:42)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)
	at org.kohsuke.groovy.sandbox.impl.Checker$1.call(Checker.java:163)
	at org.kohsuke.groovy.sandbox.GroovyInterceptor.onMethodCall(GroovyInterceptor.java:23)
	at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SandboxInterceptor.onMethodCall(SandboxInterceptor.java:158)
	at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SandboxInterceptor.onMethodCall(SandboxInterceptor.java:143)
	at org.kohsuke.groovy.sandbox.impl.Checker$1.call(Checker.java:161)
	at org.kohsuke.groovy.sandbox.impl.Checker.checkedCall(Checker.java:165)
	at com.cloudbees.groovy.cps.sandbox.SandboxInvoker.methodCall(SandboxInvoker.java:17)
	at WorkflowScript.run(WorkflowScript:77)
	at ___cps.transform___(Native Method)
	at com.cloudbees.groovy.cps.impl.ContinuationGroup.methodCall(ContinuationGroup.java:86)
	at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.dispatchOrArg(FunctionCallBlock.java:113)
	at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.fixArg(FunctionCallBlock.java:83)
	at jdk.internal.reflect.GeneratedMethodAccessor57.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at com.cloudbees.groovy.cps.impl.ContinuationPtr$ContinuationImpl.receive(ContinuationPtr.java:72)
	at com.cloudbees.groovy.cps.impl.CollectionLiteralBlock$ContinuationImpl.dispatch(CollectionLiteralBlock.java:55)
	at com.cloudbees.groovy.cps.impl.CollectionLiteralBlock$ContinuationImpl.item(CollectionLiteralBlock.java:45)
	at jdk.internal.reflect.GeneratedMethodAccessor54.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at com.cloudbees.groovy.cps.impl.ContinuationPtr$ContinuationImpl.receive(ContinuationPtr.java:72)
	at com.cloudbees.groovy.cps.impl.ContinuationGroup.methodCall(ContinuationGroup.java:89)
	at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.dispatchOrArg(FunctionCallBlock.java:113)
	at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.fixArg(FunctionCallBlock.java:83)
	at jdk.internal.reflect.GeneratedMethodAccessor57.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at com.cloudbees.groovy.cps.impl.ContinuationPtr$ContinuationImpl.receive(ContinuationPtr.java:72)
	at com.cloudbees.groovy.cps.impl.PropertyishBlock$ContinuationImpl.get(PropertyishBlock.java:76)
	at com.cloudbees.groovy.cps.LValueBlock$GetAdapter.receive(LValueBlock.java:30)
	at com.cloudbees.groovy.cps.impl.PropertyishBlock$ContinuationImpl.fixName(PropertyishBlock.java:66)
	at jdk.internal.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at com.cloudbees.groovy.cps.impl.ContinuationPtr$ContinuationImpl.receive(ContinuationPtr.java:72)
	at com.cloudbees.groovy.cps.impl.ConstantBlock.eval(ConstantBlock.java:21)
	at com.cloudbees.groovy.cps.Next.step(Next.java:83)
	at com.cloudbees.groovy.cps.Continuable$1.call(Continuable.java:174)
	at com.cloudbees.groovy.cps.Continuable$1.call(Continuable.java:163)
	at org.codehaus.groovy.runtime.GroovyCategorySupport$ThreadCategoryInfo.use(GroovyCategorySupport.java:129)
	at org.codehaus.groovy.runtime.GroovyCategorySupport.use(GroovyCategorySupport.java:268)
	at com.cloudbees.groovy.cps.Continuable.run0(Continuable.java:163)
	at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.access$001(SandboxContinuable.java:18)
	at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.run0(SandboxContinuable.java:51)
	at org.jenkinsci.plugins.workflow.cps.CpsThread.runNextChunk(CpsThread.java:185)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup.run(CpsThreadGroup.java:400)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup.access$400(CpsThreadGroup.java:96)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup$2.call(CpsThreadGroup.java:312)
	at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup$2.call(CpsThreadGroup.java:276)
	at org.jenkinsci.plugins.workflow.cps.CpsVmExecutorService$2.call(CpsVmExecutorService.java:67)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at hudson.remoting.SingleLaneExecutorService$1.run(SingleLaneExecutorService.java:139)
	at jenkins.util.ContextResettingExecutorService$1.run(ContextResettingExecutorService.java:28)
	at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:68)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Finished: FAILURE
